<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>inet lib</TITLE>
</HEAD>

<BODY>

<CENTER>

<H3>NetworkClient クラスの使い方</H3>
</CENTER>
<HR noshade>
<P>
このクラスは、任意の通信プロトコルを扱うクラスを実現するためのクラスである。インタネット上の標準的な通信プロトコルを扱うクラスは、<B>NetworkProtocol</B>
クラスを利用して実装することを想定しているが、<B>NetworkProtocol</B> クラスで仮定しているプロトコルの条件を満たさないプロトコルの場合には、このクラスを上位実装クラスとして継承して利用する。以後、このクラスを継承して新たに作成するクラスを、下位クラスと呼ぶ。なお、<B>NetworkProtocol</B>
クラスはこのクラスの下位クラスである。<BR>
<BR>
</P>
<H4>*コンストラクタ</H4>
<P>
<BR>
下位クラスのコンストラクタでは、以下の４つを引数として <B>create</B> コンストラクタを呼び出す。<BR>
<BR>
</P>
<DL>
  <DT>１．コマンドデータのフォーマット
  <DD>コマンドデータとして送信するデータのフォーマットを指定する文字列を与える。<BR>
フォーマットは、英数文字からなる文字列をコマンドデータの属性のラベルとして、その他を属性の区切り文字として抽出する。なおコマンドデータの中のコマンド名は、<B>COMMAND</B>
というラベルで指定する。<BR>
  <DT>２．レスポンスデータのフォーマット
  <DD>レスポンスデータとして受信するデータのフォーマットを指定する文字列を与える。フォーマットは、英数文字からなる文字列をレスポンスデータの属性のラベルとして、その他を属性の区切り文字として抽出する。なおレスポンスデータの中のステータスコードは、<B>STATUS</B>
というラベルで指定する。<BR>
  <DT>３．送受信データの終端文字列
  <DT>４．そのプロトコルで使用する well-known なポート番号
</DL>
<P>
<BR>
<BR>
</P>
<H4>*メソッド</H4>
<DL>
  <DT>-通信の開始
  <DD>well-known のポート番号を利用する場合は、接続先ホスト名のみを引数として与える、<B>connect</B>
メソッドを利用する。<BR>
<BR>
well-known のポート番号を利用する場合は、接続先ホスト名とポート番号を引数として与える、<B>connect</B>
メソッドを利用する。<BR>
<BR>
  <DT>-コマンドデータの送信
  <DD><B>ProtocolRecord</B> クラスのインスタンスである <B>record</B> アトリビュートに、送信するコマンドデータ（コマンド文字列、パラメータなど）を設定し、<B>sendCommand
</B>メソッドによって送信する。<BR>
<BR>
  <DT>-データのみの送信
  <DD>例えば <B>SMTP</B> プロトコルの、DATA コマンドでは送信するデータはコマンドデータの送信とは別に扱う。このような場合のデータの送信には、<B>sendData</B>
メソッドを利用する。また、sendData メソッドはデータの送信の前に、フックメソッド<B>encodeData</B>
を呼び出すようになっているため、送信するデータに付加的な処理が必要な場合には、下位クラスで再定義することによって、その処理を実装する。<BR>
<BR>
  <DT>-レスポンスデータの受信
  <DD>送信したデータに対するレスポンスデータを受信し、それをレスポンスデータのフォーマットにしたがってデコードする処理を、<B>readResponse</B>
メソッドによって行う。<BR>
またレスポンスデータが複数行からなる場合には、2行目以降のデータを <B>moreResponse</B>
メソッドによって受信する。<BR>
<BR>
また受信したレスポンスデータ中のステータスコードについては、デコード後
<B>getResponse</B> メソッドによって取り出すことができる。<BR>
<BR>
  <DT>-通信路の制御
  <DD>通信路における読み出しのタイムアウト値（ミリ秒）を <B>setTimeout</B>
および <B>getTimeout</B> により設定、参照が可能である。<BR>
</DL>
<P>
<BR>
<BR>
</P>
<H4>*利用例<BR>
</H4>
<P>
このクラスの利用例としては、<B>NetworkProtocol</B> クラスのソースコードを参照のこと。<BR>
<BR>
<BR>
</P>
<HR noshade>
<ADDRESS><B><A href="../../copyright-j.html">Copyright</A>(c) 1996-1998
IPA, ETL, AT21, FSIABC, FXIS, InArc, MRI, NUL, SBC, Sharp, TEC, TIS </B></ADDRESS>
<P>
<B>Contact: <A href="mailto:oz-admin@oz.ipa.go.jp">oz-admin@oz.ipa.go.jp</A></B>
</P>
</BODY>
</HTML>
